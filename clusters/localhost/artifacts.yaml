---
apiVersion: source.extensions.fluxcd.io/v1beta1
kind: ArtifactGenerator
metadata:
  name: flux-system
  namespace: flux-system
spec:
  sources:
    - alias: monorepo
      kind: GitRepository
      name: flux-system
  artifacts:
    - name: infrastructure-controllers
      originRevision: "@monorepo"
      copy:
        - from: "@monorepo/infrastructure/controllers/base/**"
          to: "@artifact/base/"
        - from: "@monorepo/infrastructure/controllers/localhost/**"
          to: "@artifact/localhost/"
    - name: infrastructure-configs
      originRevision: "@monorepo"
      copy:
        - from: "@monorepo/infrastructure/configs/base/**"
          to: "@artifact/base/"
        - from: "@monorepo/infrastructure/configs/localhost/**"
          to: "@artifact/localhost/"
    - name: apps
      originRevision: "@monorepo"
      copy:
        - from: "@monorepo/apps/base/**"
          to: "@artifact/base/"
        - from: "@monorepo/apps/localhost/**"
          to: "@artifact/localhost/"
